<!DOCTYPE html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <th:block th:include="layout/template :: head"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/loaderStyle.css}"/>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Cabin:wght@700&family=Roboto+Slab:wght@400&display=swap"
          rel="stylesheet">

    <style>
        #btn-back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: none;
        }


        .slick-prev:before,
        .slick-next:before {
            color: red !important;
        }

        .wrapper {
            margin: auto;
            width: 75%;
        }

        .pub {
            text-align: center;
        }


        .btn-circle {
            padding: 0 0;
            border-radius: 50%;
            text-align: center;
            line-height: 1.42857;
            border: 0;
        }

        .btn-circle:hover img {
            filter: brightness(65%);
        }


        /*ZoomIn Hover-Mask Effect*/
        .hover-mask button {
            display: block;
            position: relative;
            overflow: hidden;
        }

        .hover-mask img {
            -webkit-transition: all 0.5s ease-in-out;
            -moz-transition: all 0.5s ease-in-out;
            -o-transition: all 0.5s ease-in-out;
            -ms-transition: all 0.5s ease-in-out;
            transition: all 0.5s ease-in-out;
        }

        .hover-mask button:hover img {
            -ms-transform: scale(1.2);
            transform: scale(1.2);
        }

        .hover-mask button h5 {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            padding: 32% 20px;
            text-align: center;
            background-color: rgba(0, 0, 0, 0.4);
            -webkit-transition: all 0.5s linear;
            -moz-transition: all 0.5s linear;
            -o-transition: all 0.5s linear;
            -ms-transition: all 0.5s linear;
            transition: all 0.5s linear;
            -ms-filter: "progid: DXImageTransform.Microsoft.Alpha(Opacity=0)";
            filter: alpha(opacity=0);
            opacity: 0;
            font-family: 'Roboto Slab', serif;
        }

        .hover-mask button:hover h5 {
            -ms-filter: "progid: DXImageTransform.Microsoft.Alpha(Opacity=100)";
            filter: alpha(opacity=100);
            opacity: 1;
        }

    </style>

    <!--Slick Carousel Slider-->
    <link rel="stylesheet" type="text/css" th:href="@{/api/slick/slick-theme.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/api/slick/slick.css}"/>
    <script th:src="@{/api/slick/slick.min.js}"></script>
</head>
<body class="position-relative bg-light" data-th-span="scroll" data-bs-target="#navbar-scrollspy">

<div class="loader-container">
    <div>
        <img th:src="@{/images/logo2.png}"
             alt=""
             class="navbar-brand__img"/>
    </div>
</div>

<div class="container-fluid sticky-top" style="background-color: #404eed;">
    <header th:replace="layout/template :: header"></header>
</div>


<!--Modal avatar-->
<div class="alert fade alert-danger alert-fixed" id="alert-danger" role="alert" data-mdb-color="danger" data-mdb-position="top-right" data-mdb-stacking="true" data-mdb-width="535px" data-mdb-append-to-body="true" data-mdb-hidden="true" data-mdb-autohide="true" data-mdb-delay="2000" style="display: block; width: 535px; top: 10px; right: 10px; bottom: unset; left: unset; transform: unset;">
    A simple danger alert with
    <a href="#" class="alert-link">an example link</a>. Give it a click if you like.
</div>

<div class="modal fade" id="changeAvatarModal" tabindex="-1" aria-labelledby="changeAvatarModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="changeAvatarModalLabel">Change avatar</h5>
                <div class="alert alert-danger" role="alert">
                    Formato de imagen inválido
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body m-auto">
                <img id="frame"
                     th:src="${person.getAvatarPath()} != null ? '/assets/'+${person.getAvatarPath()} : '/images/DefaultAvatar.png'"
                     class="rounded-circle border border-secondary" width="150" height="150" alt="avatar"
                     loading="lazy"/>
            </div>
            <div class="modal-footer m-auto">
                <form th:action="@{/profile}" method="post" th:object="${personDto}" enctype="multipart/form-data">
                    <div class="form-group row">
                        <input type="hidden" name="id" th:field="*{id}"/>
                        <input type="hidden" name="accountVerified" th:field="*{accountVerified}"/>
                        <input type="hidden" name="birthDate" th:field="*{birthDate}"/>
                        <input type="hidden" name="email" th:field="*{email}"/>
                        <input type="hidden" name="lastName" th:field="*{lastName}"/>
                        <input type="hidden" name="name" th:field="*{name}"/>
                        <input type="hidden" name="password" th:field="*{password}"/>
                        <input type="hidden" name="phone" th:field="*{phone}"/>
                        <input type="hidden" name="username" th:field="*{username}"/>

                        <input type="file" class="form-control form-control-sm" name="avatar" th:field="*{avatar}"
                               id="formFile" accept="image/*"/>
                        <div class="col-12 text-center pt-3">
                            <button id="submitAvatar" type="submit" class="btn btn-outline-primary rounded-0 btn-sm"
                                    style="display: none">
                                <i class="fas fa-check"></i> Aplicar
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script th:inline="javascript">

    $('#formFile').on("change", function (e) {
        const submitAvatar = document.getElementById('submitAvatar');
        const frame = document.getElementById('frame');
        const fileInput = document.getElementById('formFile');
        let filePath = fileInput.value;
        // Allowing file type
        let allowedExtensions = /(\.png|\.jpg|\.jpeg|\.gif)$/i;
        if (!allowedExtensions.exec(filePath)) {
            if(filePath.length > 0) {
                alert("Formato de imágen inválido...")
            }
            fileInput.value = '';
            frame.src = /*[[${person.getAvatarPath()} != null ? '/assets/'+${person.getAvatarPath()} : '/images/DefaultAvatar.png']]*/ null;
            submitAvatar.style.display = "none";
        } else {
            frame.src = URL.createObjectURL(event.target.files[0]);
            submitAvatar.style.display = "inline";
        }
    });

    function clearImage() {
        document.getElementById('formFile').value = null;
        frame.src = "";
    }
</script>
<!---->

<!--Profile-->
<div class="container">
    <div class="main-body">

        <!-- Breadcrumb -->
        <nav aria-label="breadcrumb" class="main-breadcrumb">
        </nav>
        <!-- /Breadcrumb -->

        <div class="row gutters-sm">
            <div class="col-md-4 mb-3">
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex flex-column align-items-center text-center hover-mask">
                            <th:block th:if="${person != null}">
                                <!--                                    <img src="https://mdbootstrap.com/img/Photos/Avatars/img (31).jpg" class="rounded-circle" height="22"-->
                                <!--                                         alt="" loading="lazy" />-->
                                <button class="btn btn-circle" data-bs-toggle="modal"
                                        data-bs-target="#changeAvatarModal">
                                    <img th:src="${person.getAvatarPath()} != null ? '/assets/'+${person.getAvatarPath()} : '/images/DefaultAvatar.png'"
                                         class="rounded-circle border border-secondary" width="150" height="150"
                                         alt="avatar" loading="lazy"/>
                                    <h5 class="text-white">Change avatar</h5>
                                </button>
                            </th:block>
                            <!--                            <img th:src="@{/assets/{path} (path=${person.getAvatarPath()})}" class="rounded-circle" alt="Admin" width="150">-->
                            <div class="mt-3">
                                <h4>Nombre Apellido</h4>
                                <p class="text-secondary mb-1">Profesión</p>
                                <p class="text-muted font-size-sm">Dirección</p>
                                <button class="btn btn-outline-primary" th:text="#{message}"></button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card mt-3">
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                            <h6 class="mb-0">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round" class="feather feather-globe mr-2 icon-inline">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <line x1="2" y1="12" x2="22" y2="12"></line>
                                    <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                                </svg>
                                Website
                            </h6>
                            <span class="text-secondary">website.com</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                            <h6 class="mb-0">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round" class="feather feather-twitter mr-2 icon-inline text-info">
                                    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
                                </svg>
                                Twitter
                            </h6>
                            <span class="text-secondary">@twitter</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                            <h6 class="mb-0">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round"
                                     class="feather feather-instagram mr-2 icon-inline text-danger">
                                    <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                                    <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                                    <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                                </svg>
                                Instagram
                            </h6>
                            <span class="text-secondary">instagram</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                            <h6 class="mb-0">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                     fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                     stroke-linejoin="round"
                                     class="feather feather-facebook mr-2 icon-inline text-primary">
                                    <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                                </svg>
                                Facebook
                            </h6>
                            <span class="text-secondary">facceboock</span>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-md-8">
                <div class="card mb-3">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-3">
                                <h6 class="mb-0" th:text="#{username}">Username</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                Nombre de usuario
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <h6 class="mb-0" th:text="#{name}">Name</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                Nombre
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <h6 class="mb-0" th:text="#{last-name}">Lastname</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                Apellido
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <h6 class="mb-0" th:text="#{birth-date}">Birth Date</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                Fecha de nacimiento
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <h6 class="mb-0" th:text="#{email}">E-Mail Address</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                email@website.com
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <h6 class="mb-0" th:text="#{telephone}">Telephone</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                (+598) 099 se me para y se me mueve
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <h6 class="mb-0" th:text="#{address}">Adress</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                Dirección
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-12">
                                <a class="btn btn-info " target="__blank" href="#">Edit</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row gutters-sm">
                    <div class="col-sm-6 mb-3">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5>Como es este subastador</h5>
                                <div>
                                    <h6>Productos subastados: </h6>
                                    <div>
                                        <i class="fa-regular fa-comments"></i>
                                        <div>Atención</div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>


<!-- Back to top button -->
<a id="back-to-top" href="#" class="btn btn-danger rounded-circle btn-sm back-to-top" role="button">
    <i class="fas fa-chevron-up"></i>
</a>
<th:block th:insert="layout/template :: language-bottom"/>

<script th:src="@{/js/scriptBtnBackToTop.js}"></script>
<script th:src="@{/js/scriptLoader.js}"></script>
</body>
</html>