<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title th:text="${item.getName()} + ' - KeiBuy'"></title>
    <th:block th:include="layout/template :: head"/>
    <!-- Google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Cabin:wght@700&family=Roboto+Slab:wght@400&display=swap"
          rel="stylesheet">
    <style th:include="layout/loader :: style"></style>
    <style>
        @font-face {
            font-family: Arial !important;
            font-display: swap !important;
        }

        .thumbnail_images ul {
            list-style: none;
            justify-content: center;
            display: flex;
            align-items: center;
            margin-top: 10px;
            overflow: auto;
        }

    </style>
    <style>
        ::-webkit-scrollbar {
            width: 8px;
        }

        /* Track */
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        /* Handle */
        ::-webkit-scrollbar-thumb {
            background: #888;
        }

        /* Handle on hover */
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        body {
            background-color: #ecedee
        }

        .card {
            border: none;
            overflow: hidden
        }

        .thumbnail_images ul {
            list-style: none;
            justify-content: center;
            display: flex;
            align-items: center;
            margin-top: 10px
        }

        .thumbnail_images ul li {
            margin: 5px;
            padding: 10px;
            border: 2px solid #eee;
            cursor: pointer;
            transition: all 0.5s
        }

        .thumbnail_images ul li:hover {
            border: 2px solid #000
        }

        .main_image {
            display: flex;
            justify-content: center;
            align-items: center;
            border-bottom: 1px solid #eee;
            height: 400px;
            width: 100%;
            overflow: hidden
        }

        .content p {
            font-size: 12px
        }

        .ratings span {
            font-size: 14px;
            margin-left: 12px
        }

        .colors ul {
            list-style: none;
            display: flex;
            padding-left: 0;
        }

        .colors ul li {
            height: 20px;
            width: 20px;
            display: flex;
            border-radius: 50%;
            margin-right: 10px;
            cursor: pointer
        }

        .colors ul li:nth-child(1) {
            background-color: #6c704d
        }

        .colors ul li:nth-child(2) {
            background-color: #96918b
        }

        .colors ul li:nth-child(3) {
            background-color: #68778e
        }

        .colors ul li:nth-child(4) {
            background-color: #263f55
        }

        .colors ul li:nth-child(5) {
            background-color: black
        }

        .right-side {
            position: relative
        }

    </style>
</head>

<body class="position-relative bg-light snippet-body" data-th-span="scroll"
      data-bs-target="#navbar-scrollspy">

<th:block th:include="layout/template :: dependencies-js"/>

<th:block th:include="layout/loader :: loader"/>
<th:block th:include="layout/navbar :: navbar"/>

<!--Item-->
<div class="container-xl mt-5 mb-5 px-0">
    <div class="card">
        <div class="row g-0">
            <div class="col-md-5 border-end">
                <div class="d-flex flex-column justify-content-center">
                    <div class="main_image h-25 p-5">
                        <img class="rounded rounded-2 border border-dark border-1" src="https://i.imgur.com/w6kEctd.jpg"
                             width="350">
                        <img class="rounded rounded-2 border border-dark border-1" src="https://picsum.photos/200"
                             width="350">
                        <img class="rounded rounded-2 border border-dark border-1" src="https://picsum.photos/200"
                             width="350">
                        <img class="rounded rounded-2 border border-dark border-1" src="https://picsum.photos/200"
                             width="350">
                        <img class="rounded rounded-2 border border-dark border-1" src="https://picsum.photos/200"
                             width="350">
                    </div>

                    <div class="your-class px-2">
                        <div class="m-2 rounded rounded-1">
                            <img class="card-img" src="https://i.imgur.com/w6kEctd.jpg" alt="Card image cap"
                                 height="75">

                        </div>
                        <div class="m-2 rounded rounded-1">
                            <img class="card-img" src="https://picsum.photos/200" alt="Card image cap" height="75">

                        </div>
                        <div class="m-2 rounded rounded-1">
                            <img class="card-img" src="https://picsum.photos/200" alt="Card image cap" height="75">

                        </div>
                        <div class="m-2 rounded rounded-1">
                            <img class="card-img" src="https://picsum.photos/200" alt="Card image cap" height="75">

                        </div>
                        <div class="m-2 rounded rounded-1">
                            <img class="card-img" src="https://picsum.photos/200" alt="Card image cap" height="75">

                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-7">
                <div class="py-1 px-3 right-side">
                    <div class="d-flex justify-content-center align-items-center text-center">
                        <h3 th:text="${item.getName()}"></h3>
                    </div>
                    <div class="content">
                        <p style="max-height: 50%" class="h-25
                        overflow-auto
                        border
                        border-1
                        border-secondary
                        p-1
                        rounded
                        rounded-2" th:text="${item.getDescription()}"></p>
                    </div>
                    <h5 id="contdwn"></h5>
                    <br>
                    <h5 th:text="'Última oferta: $' + (${item.getMostOffer() != null} ? ${item.getMostOffer().getOffer()} : '-')">-</h5>
                    <h6>Tu Oferta: $5</h6>
                    <br>
                    <!--Modal del modal de oferta-->
                    <div class="modal fade" id="alertModal" tabindex="-1" aria-labelledby="alertModalLabel"
                         aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <i class="fa-solid fa-triangle-exclamation"></i>
                                    <h2 class="modal-title fs-2" id="alertModalLabel">¡Atención!</h2>
                                </div>
                                <div class="modal-body">
                                    <div class="mb-3">
                                        <h4>Tenga en cuenta la responsabilidad que conlleva el proponer una
                                            oferta.<br>Pedimos precaución a la hora de ofertar.</h4>
                                    </div>
                                    <div class="mb-3">
                                        <label><input type="checkbox" id="acceptCheck" value="first_checkbox"> Accepto
                                            la
                                            responsabilidad sobre las ofertas que realice.</label><br>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar
                                    </button>
                                    <button type="button" id="acceptTermsBtn" class="btn btn-primary">Acceptar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--Modal del modal de oferta-->
                    <div class="modal fade" id="offerModal" tabindex="-1" aria-labelledby="offerModalLabel"
                         aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h1 class="modal-title fs-5" id="offerModalLabel">Oferta</h1>

                                </div>
                                <div class="modal-body">
                                    <div class="mb-3">
                                        <label for="offert" class="col-form-label">Ingrese su oferta</label>
                                        <input type="text" class="form-control" id="offert">
                                    </div>
                                    <div class="mb-3">
                                        <label for="password" class="col-form-label">Ingrese su contraseña</label>
                                        <input type="text" class="form-control" id="password">
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar
                                    </button>
                                    <button type="button" class="btn btn-primary">Enviar oferta</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--                    Modal btn-->

                    <button class="cart-btn btn btn-sm btn-primary px-4" id="btnOffer">Ofertar</button>
                    <!--                    <button type="button" class="btn btn-outline-primary btn mt-1" id="btnOffer">Ofertar</button>-->
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Checkbox -->
<!--    <script>-->
<!--function validate() {-->
<!--        if (document.getElementById('acceptCheck').checked) {-->
<!--            alert("checked");-->
<!--        } else {-->
<!--            alert("You didn't check it! Let me check it for you.");-->
<!--        }-->
<!--    }-->
<!--    </script>-->


<!-- Show alert or Offer Modal Script -->
<script>
    const btnOffer = $("#btnOffer");
    const time = 10000;

    // JQueryElement[0] OR JQueryElement.get(0) == Dom Element
    btnOffer[0].addEventListener("click", function (event) {
        var alertModal = new bootstrap.Modal(
            document.getElementById("alertModal"),
            {
                keyboard: false,
            }
        );


        var offerModal = new bootstrap.Modal(
            document.getElementById("offerModal"),
            {
                keyboard: false,
            }
        );

        let hasOpenTerms = false;

        let readTermsTime = parseInt(
            sessionStorage["keibuyReadTermsTime"] || 0
        );
        if (Date.now() > readTermsTime + time) hasOpenTerms = true;

        if (hasOpenTerms) {
            alertModal.show();
        } else {
            offerModal.show();
        }
    });

    const acceptTermsBtn = $("#acceptTermsBtn");
    acceptTermsBtn.prop('disabled', true);
    const acceptTermsCheck = $("#acceptCheck");
    acceptTermsCheck[0].addEventListener("change", function (event) {
        if (this.checked) {
            acceptTermsBtn.prop('disabled', false);
        } else {
            acceptTermsBtn.prop('disabled', true);
        }
    });

    acceptTermsBtn[0].addEventListener("click", function (event) {
        const alertModalDocument = document.querySelector("#alertModal");
        const alertModal = bootstrap.Modal.getInstance(alertModalDocument);

        var offerModal = new bootstrap.Modal(
            document.getElementById("offerModal"),
            {
                backdrop: "static",
                keyboard: false,
            }
        );

        alertModal.hide();
        offerModal.show();

        sessionStorage["keibuyReadTermsTime"] = Date.now();
    });


</script>

<!-- Reloj -->
<script>
    // Set the date we're counting down to
    var countDownDate = new Date("Jan 5, 2024 15:37:25").getTime();

    // Update the count down every 1 second
    var x = setInterval(function () {

        // Get today's date and time
        var now = new Date().getTime();

        // Find the distance between now and the count down date
        var distance = countDownDate - now;

        // Time calculations for days, hours, minutes and seconds
        var days = Math.floor(distance / (1000 * 60 * 60 * 24));
        var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        var seconds = Math.floor((distance % (1000 * 60)) / 1000);

        // Display the result in the element with id="contdwn"
        document.getElementById("contdwn").innerHTML = "Expira en: " + days + "d " + hours + "h "
            + minutes + "m " + seconds + "s ";

        // If the count down is finished, write some text
        if (distance < 0) {
            clearInterval(x);
            document.getElementById("contdwn").innerHTML = "EXPIRED";
        }
    }, 1000);

</script>

<!--Carrusel-->
<script>
    $(document).ready(function () {
        $('.main_image').slick({
            slidesToShow: 1,
            slidesToScroll: 1,
            arrows: false,
            fade: true,
            asNavFor: '.your-class'
        });
        $('.your-class').slick({
            autoplay: true,
            autoplaySpeed: 8000,
            infinite: false,
            speed: 300,
            asNavFor: '.main_image',
            slidesToShow: 4,
            slidesToScroll: 1,
            centerMode: true,
            focusOnSelect: true,
            responsive: [
                {
                    breakpoint: 1024,
                    settings: {
                        slidesToShow: 3,
                        slidesToScroll: 1,
                        infinite: false,
                        dots: false,
                    }
                }
            ]
        });
    });
</script>

<th:block th:insert="layout/btnBackToTop :: btn"/>
<script th:src="@{/js/scriptBtnBackToTop.js}"></script>
<script th:src="@{/js/scriptLoader.js}"></script>
<th:block th:include="layout/btnLanguage :: btnLang"/>
</body>


</html>